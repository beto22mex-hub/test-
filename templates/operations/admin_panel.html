{% extends 'base.html' %}

{% block title %}Panel de Administración - Sistema de Manufactura{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Panel de Administración</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group me-2">
            <button type="button" class="btn btn-sm btn-outline-primary" onclick="refreshPanel()">
                <i class="bi bi-arrow-clockwise me-1"></i>
                Actualizar
            </button>
        </div>
    </div>
</div>

<!-- Admin Statistics -->
<div class="row mb-4">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card stat-card">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-uppercase mb-1">Usuarios</div>
                        <div class="h5 mb-0 font-weight-bold">{{ total_users }}</div>
                    </div>
                    <div class="col-auto">
                        <i class="bi bi-people h2 text-white-50"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card stat-card success">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-uppercase mb-1">Operaciones</div>
                        <div class="h5 mb-0 font-weight-bold">{{ total_operations }}</div>
                    </div>
                    <div class="col-auto">
                        <i class="bi bi-gear h2 text-white-50"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card stat-card warning">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-uppercase mb-1">Componentes</div>
                        <div class="h5 mb-0 font-weight-bold">{{ total_parts }}</div>
                    </div>
                    <div class="col-auto">
                        <i class="bi bi-box h2 text-white-50"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card stat-card danger">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-uppercase mb-1">Alertas Activas</div>
                        <div class="h5 mb-0 font-weight-bold">{{ active_alerts }}</div>
                    </div>
                    <div class="col-auto">
                        <i class="bi bi-exclamation-triangle h2 text-white-50"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Management Sections -->
<div class="row">
    <!-- User Management -->
    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-people me-2"></i>
                    Gestión de Usuarios
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Administrar usuarios del sistema, roles y permisos.</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" onclick="openUserManagement()">
                        <i class="bi bi-person-plus me-2"></i>
                        Gestionar Usuarios
                    </button>
                    <button class="btn btn-outline-secondary" onclick="viewUserActivity()">
                        <i class="bi bi-activity me-2"></i>
                        Ver Actividad de Usuarios
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Operations Management -->
    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-gear me-2"></i>
                    Gestión de Operaciones
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Configurar y administrar las operaciones de manufactura.</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-success" onclick="openOperationManagement()">
                        <i class="bi bi-plus-circle me-2"></i>
                        Gestionar Operaciones
                    </button>
                    <button class="btn btn-outline-secondary" onclick="viewOperationStats()">
                        <i class="bi bi-bar-chart me-2"></i>
                        Estadísticas de Operaciones
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Parts Management -->
    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-box me-2"></i>
                    Gestión de Componentes
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Administrar componentes autorizados y sus revisiones.</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-warning" onclick="openPartsManagement()">
                        <i class="bi bi-box-seam me-2"></i>
                        Gestionar Componentes
                    </button>
                    <button class="btn btn-outline-secondary" onclick="importParts()">
                        <i class="bi bi-upload me-2"></i>
                        Importar Componentes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Serial Numbers Management -->
    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-hash me-2"></i>
                    Gestión de Números de Serie
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Editar, eliminar y gestionar números de serie existentes.</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-info" onclick="openSerialManagement()">
                        <i class="bi bi-pencil-square me-2"></i>
                        Gestionar Series
                    </button>
                    <button class="btn btn-outline-danger" onclick="bulkOperations()">
                        <i class="bi bi-trash me-2"></i>
                        Operaciones en Lote
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- System Tools -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-tools me-2"></i>
                    Herramientas del Sistema
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <button class="btn btn-outline-primary w-100" onclick="backupData()">
                            <i class="bi bi-download me-2"></i>
                            Respaldar Datos
                        </button>
                    </div>
                    <div class="col-md-3 mb-3">
                        <button class="btn btn-outline-warning w-100" onclick="systemMaintenance()">
                            <i class="bi bi-wrench me-2"></i>
                            Mantenimiento
                        </button>
                    </div>
                    <div class="col-md-3 mb-3">
                        <button class="btn btn-outline-info w-100" onclick="viewSystemLogs()">
                            <i class="bi bi-file-text me-2"></i>
                            Ver Logs
                        </button>
                    </div>
                    <div class="col-md-3 mb-3">
                        <button class="btn btn-outline-success w-100" onclick="systemSettings()">
                            <i class="bi bi-gear me-2"></i>
                            Configuración
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Management Modals Container -->
<div id="modalContainer"></div>
{% endblock %}

{% block extra_js %}
<script>
function refreshPanel() {
    location.reload();
}

function openUserManagement() {
    showManagementModal('users', 'Gestión de Usuarios');
}

function openOperationManagement() {
    showManagementModal('operations', 'Gestión de Operaciones');
}

function openPartsManagement() {
    showManagementModal('parts', 'Gestión de Componentes');
}

function openSerialManagement() {
    showManagementModal('serials', 'Gestión de Números de Serie');
}

function showManagementModal(type, title) {
    const modalId = `${type}Modal`;
    const modalHtml = `
        <div class="modal fade" id="${modalId}" tabindex="-1" aria-labelledby="${modalId}Label" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="${modalId}Label">${title}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="${type}Content">
                            <div class="text-center">
                                <div class="spinner-border" role="status">
                                    <span class="visually-hidden">Cargando...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="button" class="btn btn-primary" onclick="refreshManagementContent('${type}')">Actualizar</button>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    document.getElementById('modalContainer').innerHTML = modalHtml;
    const modal = new bootstrap.Modal(document.getElementById(modalId));
    modal.show();
    
    // Load content based on type
    loadManagementContent(type);
}

function loadManagementContent(type) {
    const contentDiv = document.getElementById(`${type}Content`);
    
    // Make API call to load real data
    fetch(`/operations/api/${type}/`)
        .then(response => response.json())
        .then(data => {
            let content = '';
            
            switch(type) {
                case 'users':
                    content = getUserManagementContent(data.users || []);
                    break;
                case 'operations':
                    content = getOperationManagementContent(data.operations || []);
                    break;
                case 'parts':
                    content = getPartsManagementContent(data.parts || []);
                    break;
                case 'serials':
                    content = getSerialManagementContent(data.serials || []);
                    break;
            }
            
            contentDiv.innerHTML = content;
        })
        .catch(error => {
            console.error('Error loading data:', error);
            contentDiv.innerHTML = '<div class="alert alert-danger">Error cargando datos</div>';
        });
}

function getUserManagementContent(users) {
    const usersRows = users.map(user => `
        <tr>
            <td>${user.username}</td>
            <td>${user.email}</td>
            <td><span class="badge bg-${getRoleBadgeColor(user.role)}">${getRoleDisplayName(user.role)}</span></td>
            <td><span class="badge bg-${user.is_active ? 'success' : 'danger'}">${user.is_active ? 'Activo' : 'Inactivo'}</span></td>
            <td>
                <button class="btn btn-sm btn-outline-primary" onclick="editUser(${user.id})">Editar</button>
                <button class="btn btn-sm btn-outline-danger" onclick="deleteUser(${user.id})">Desactivar</button>
            </td>
        </tr>
    `).join('');

    return `
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h6>Agregar Usuario</h6>
                    </div>
                    <div class="card-body">
                        <form id="addUserForm" onsubmit="addUser(event)">
                            <div class="mb-3">
                                <label class="form-label">Nombre de Usuario</label>
                                <input type="text" class="form-control" name="username" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" name="email" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Nombre</label>
                                <input type="text" class="form-control" name="first_name">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Apellido</label>
                                <input type="text" class="form-control" name="last_name">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Rol</label>
                                <select class="form-select" name="role">
                                    <option value="OPERATOR">Operador</option>
                                    <option value="SUPERVISOR">Supervisor</option>
                                    <option value="QUALITY">Control de Calidad</option>
                                    <option value="ADMIN">Administrador</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Contraseña Temporal</label>
                                <input type="password" class="form-control" name="password" value="temp123">
                            </div>
                            <button type="submit" class="btn btn-primary">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Usuario</th>
                                <th>Email</th>
                                <th>Rol</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${usersRows}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

function getOperationManagementContent(operations) {
    const operationsRows = operations.map(operation => `
        <tr>
            <td>${operation.sequence_number}</td>
            <td>${operation.name}</td>
            <td>${operation.estimated_time_minutes}</td>
            <td><i class="bi bi-${operation.requires_approval ? 'check-circle text-success' : 'x-circle text-danger'}"></i></td>
            <td><span class="badge bg-${operation.is_active ? 'success' : 'danger'}">${operation.is_active ? 'Activo' : 'Inactivo'}</span></td>
            <td>
                <button class="btn btn-sm btn-outline-primary" onclick="editOperation(${operation.id})">Editar</button>
                <button class="btn btn-sm btn-outline-danger" onclick="deleteOperation(${operation.id})">Desactivar</button>
            </td>
        </tr>
    `).join('');

    return `
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h6>Agregar Operación</h6>
                    </div>
                    <div class="card-body">
                        <form id="addOperationForm" onsubmit="addOperation(event)">
                            <div class="mb-3">
                                <label class="form-label">Nombre</label>
                                <input type="text" class="form-control" name="name" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Descripción</label>
                                <textarea class="form-control" name="description" rows="3"></textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Secuencia</label>
                                <input type="number" class="form-control" name="sequence_number" min="1" max="10" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Tiempo Estimado (min)</label>
                                <input type="number" class="form-control" name="estimated_time_minutes" min="1" required>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" name="requires_approval" checked>
                                <label class="form-check-label">Requiere Aprobación</label>
                            </div>
                            <button type="submit" class="btn btn-success">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Secuencia</th>
                                <th>Nombre</th>
                                <th>Tiempo (min)</th>
                                <th>Aprobación</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${operationsRows}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

function getPartsManagementContent(parts) {
    const partsRows = parts.map(part => `
        <tr>
            <td>${part.part_number}</td>
            <td>${part.description}</td>
            <td>${part.revision}</td>
            <td><span class="badge bg-${part.is_active ? 'success' : 'danger'}">${part.is_active ? 'Activo' : 'Inactivo'}</span></td>
            <td>
                <button class="btn btn-sm btn-outline-primary" onclick="editPart(${part.id})">Editar</button>
                <button class="btn btn-sm btn-outline-danger" onclick="deletePart(${part.id})">Desactivar</button>
            </td>
        </tr>
    `).join('');

    return `
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h6>Agregar Componente</h6>
                    </div>
                    <div class="card-body">
                        <form id="addPartForm" onsubmit="addPart(event)">
                            <div class="mb-3">
                                <label class="form-label">Número de Parte</label>
                                <input type="text" class="form-control" name="part_number" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Descripción</label>
                                <textarea class="form-control" name="description" rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Revisión</label>
                                <input type="text" class="form-control" name="revision" value="A" required>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" name="is_active" checked>
                                <label class="form-check-label">Activo</label>
                            </div>
                            <button type="submit" class="btn btn-warning">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Número de Parte</th>
                                <th>Descripción</th>
                                <th>Revisión</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${partsRows}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    `;
}

function getSerialManagementContent(serials) {
    const serialsRows = serials.map(serial => `
        <tr>
            <td><input type="checkbox" class="serial-checkbox" value="${serial.serial_number}"></td>
            <td>${serial.serial_number}</td>
            <td>${serial.order_number}</td>
            <td>${serial.part_number}</td>
            <td><span class="badge bg-${getStatusBadgeColor(serial.status)}">${getStatusDisplayName(serial.status)}</span></td>
            <td>
                <div class="progress" style="height: 20px;">
                    <div class="progress-bar bg-${getProgressBarColor(serial.completion_percentage)}" style="width: ${serial.completion_percentage}%">${serial.completion_percentage}%</div>
                </div>
            </td>
            <td>
                <button class="btn btn-sm btn-outline-primary" onclick="editSerial(${serial.id})">Editar</button>
                <button class="btn btn-sm btn-outline-danger" onclick="deleteSerial(${serial.id})">Eliminar</button>
            </td>
        </tr>
    `).join('');

    return `
        <div class="mb-3">
            <div class="row">
                <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Buscar número de serie..." id="serialSearch">
                </div>
                <div class="col-md-6">
                    <select class="form-select" id="serialStatusFilter">
                        <option value="">Todos los estados</option>
                        <option value="CREATED">Creado</option>
                        <option value="IN_PROCESS">En Proceso</option>
                        <option value="COMPLETED">Completado</option>
                        <option value="REJECTED">Rechazado</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>
                        <th>Número de Serie</th>
                        <th>Orden</th>
                        <th>Componente</th>
                        <th>Estado</th>
                        <th>Progreso</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    ${serialsRows}
                </tbody>
            </table>
        </div>
        <div class="mt-3">
            <button class="btn btn-danger" onclick="bulkDelete()">Eliminar Seleccionados</button>
            <button class="btn btn-warning" onclick="bulkStatusChange()">Cambiar Estado</button>
        </div>
    `;
}

// CRUD Functions
function addUser(event) {
    event.preventDefault();
    const formData = new FormData(event.target);
    const userData = Object.fromEntries(formData.entries());
    
    fetch('/operations/api/users/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify(userData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showNotification(data.message, 'success');
            refreshManagementContent('users');
            event.target.reset();
        } else {
            showNotification(data.error, 'danger');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showNotification('Error al agregar usuario', 'danger');
    });
}

function addOperation(event) {
    event.preventDefault();
    const formData = new FormData(event.target);
    const operationData = Object.fromEntries(formData.entries());
    operationData.requires_approval = formData.has('requires_approval');
    
    fetch('/operations/api/operations/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify(operationData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showNotification(data.message, 'success');
            refreshManagementContent('operations');
            event.target.reset();
        } else {
            showNotification(data.error, 'danger');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showNotification('Error al agregar operación', 'danger');
    });
}

function addPart(event) {
    event.preventDefault();
    const formData = new FormData(event.target);
    const partData = Object.fromEntries(formData.entries());
    partData.is_active = formData.has('is_active');
    
    fetch('/operations/api/parts/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify(partData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showNotification(data.message, 'success');
            refreshManagementContent('parts');
            event.target.reset();
        } else {
            showNotification(data.error, 'danger');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showNotification('Error al agregar componente', 'danger');
    });
}

// Helper functions
function refreshManagementContent(type) {
    loadManagementContent(type);
}

function getRoleBadgeColor(role) {
    const colors = {
        'ADMIN': 'danger',
        'SUPERVISOR': 'warning',
        'QUALITY': 'info',
        'OPERATOR': 'primary'
    };
    return colors[role] || 'secondary';
}

function getRoleDisplayName(role) {
    const names = {
        'ADMIN': 'Administrador',
        'SUPERVISOR': 'Supervisor',
        'QUALITY': 'Control de Calidad',
        'OPERATOR': 'Operador'
    };
    return names[role] || role;
}

function getStatusBadgeColor(status) {
    const colors = {
        'CREATED': 'secondary',
        'IN_PROCESS': 'warning',
        'COMPLETED': 'success',
        'REJECTED': 'danger',
        'DEFECTIVE': 'danger',
        'SCRAPPED': 'dark'
    };
    return colors[status] || 'secondary';
}

function getStatusDisplayName(status) {
    const names = {
        'CREATED': 'Creado',
        'IN_PROCESS': 'En Proceso',
        'COMPLETED': 'Completado',
        'REJECTED': 'Rechazado',
        'DEFECTIVE': 'Con Defecto',
        'SCRAPPED': 'Desechado'
    };
    return names[status] || status;
}

function getProgressBarColor(percentage) {
    if (percentage >= 100) return 'success';
    if (percentage >= 75) return 'info';
    if (percentage >= 50) return 'warning';
    return 'danger';
}

function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

// Placeholder functions for edit/delete operations
function editUser(userId) { showNotification('Función de edición de usuario - Por implementar', 'info'); }
function deleteUser(userId) { showNotification('Función de eliminación de usuario - Por implementar', 'info'); }
function editOperation(operationId) { showNotification('Función de edición de operación - Por implementar', 'info'); }
function deleteOperation(operationId) { showNotification('Función de eliminación de operación - Por implementar', 'info'); }
function editPart(partId) { showNotification('Función de edición de componente - Por implementar', 'info'); }
function deletePart(partId) { showNotification('Función de eliminación de componente - Por implementar', 'info'); }
function editSerial(serialId) { showNotification('Función de edición de serie - Por implementar', 'info'); }
function deleteSerial(serialId) { showNotification('Función de eliminación de serie - Por implementar', 'info'); }


// Additional functions
function viewUserActivity() {
    showNotification('Función de actividad de usuarios - Por implementar', 'info');
}

function viewOperationStats() {
    showNotification('Función de estadísticas de operaciones - Por implementar', 'info');
}

function importParts() {
    showNotification('Función de importación de componentes - Por implementar', 'info');
}

function bulkOperations() {
    showNotification('Función de operaciones en lote - Por implementar', 'info');
}

function backupData() {
    showNotification('Iniciando respaldo de datos...', 'info');
}

function systemMaintenance() {
    showNotification('Función de mantenimiento del sistema - Por implementar', 'warning');
}

function viewSystemLogs() {
    showNotification('Función de visualización de logs - Por implementar', 'info');
}

function systemSettings() {
    showNotification('Función de configuración del sistema - Por implementar', 'info');
}

function toggleSelectAll() {
    const selectAll = document.getElementById('selectAll');
    const checkboxes = document.querySelectorAll('.serial-checkbox');
    checkboxes.forEach(checkbox => {
        checkbox.checked = selectAll.checked;
    });
}

function bulkDelete() {
    const selected = document.querySelectorAll('.serial-checkbox:checked');
    if (selected.length > 0 && confirm(`¿Eliminar ${selected.length} números de serie?`)) {
        showNotification(`${selected.length} números de serie eliminados`, 'success');
    }
}

function bulkStatusChange() {
    const selected = document.querySelectorAll('.serial-checkbox:checked');
    if (selected.length > 0) {
        showNotification(`Cambio de estado para ${selected.length} números de serie - Por implementar`, 'info');
    }
}
</script>
{% endblock %}
